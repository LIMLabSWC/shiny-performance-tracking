---
title: |
  | Weekly report of animal performance
  | (sound categorization)
 
output: pdf_document


params:
  exp: NA
  stg: NA
  fil: NA
  ani: NA
  dt: NA
  
header-includes:
  - \usepackage{booktabs}
  - \usepackage{longtable}
  - \usepackage{array}
  - \usepackage{multirow}
  - \usepackage{wrapfig}
  - \usepackage{float}
  - \usepackage{colortbl}
  - \usepackage{pdflscape}
  - \usepackage{tabu}
  - \usepackage{threeparttable}
  - \usepackage{threeparttablex}
  - \usepackage[normalem]{ulem}
  - \usepackage[normalem]{ulem}
  - \usepackage[utf8]{inputenc}
  - \usepackage{makecell}
  - \usepackage{xcolor}  
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)
library(knitr)
library(kableExtra)

```

# Summary of last day's performance

```{r}
TRAINING %>%
            dplyr::filter(
              experimenter == params$exp,
              choice_direction == "right_trials",
              protocol == "@SoundCategorization",
              date == max(date)
            ) %>%
  mutate(correct_ratio = (correct_trials / completed_trials) %>%
           round(2)) %>%
  mutate(violation_ratio = (violation_trials / all_trials) %>%
              round(2)) %>% 
  select(
    animal_id,
    date,
    stage,
    correct_trials,
    error_trials,
    violation_trials,
    timeoout_trials,
    correct_ratio,
    violation_ratio
    ) %>% 
  knitr::kable(format = "latex", booktabs = T) %>% 
  kable_styling(latex_options = c("scale_down", "striped"))
```



# Number of completed trials

```{r, fig.width=12, fig.height=10}
 plots_SoundCateg(
      plottype_SC = "No. completed trials",
      #datelim_SC = params$dt,
      stage_filter_SC = params$stg,
      f_options_SC = params$fil,
      animal_filter_SC = params$ani,
      exp_SC = params$exp
    )
```



# Ratio of correct trials

```{r, fig.width=12, fig.height=10}
 plots_SoundCateg(
      plottype_SC = "Correct ratio",
      #datelim_SC = params$dt,
      stage_filter_SC = params$stg,
      f_options_SC = params$fil,
      animal_filter_SC = params$ani,
      exp_SC = params$exp
    )
```
